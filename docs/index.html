<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access Data from Chicago Transit Authority(CTA)'s Bus Tracker API and Customer Alerts API  • rCTA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access Data from Chicago Transit Authority(CTA)'s Bus Tracker API and Customer Alerts API ">
<meta property="og:description" content="Allows one to get various bus information in Chicago through CTA's API. ">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rCTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Alert_info.html">Functions explained - look up alert information</a>
    </li>
    <li>
      <a href="articles/lookup_info.html">Functions explained - look up general information</a>
    </li>
    <li>
      <a href="articles/setup_myfavorite.html">Functions explained - set up my favorite route</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="rcta" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rcta" class="anchor"></a>rCTA</h1></div>
<p><code>rCTA</code> is an R interfact to access the APIs of Chicago Transit Authority(CTA) in order to get real-time information of buses and help users make empowered decisions about their trips.The APIs include <strong>Bus Tracker API</strong> and <strong>Customer Alerts API</strong>. Check out the documentations here:</p>
<p><a href="https://www.transitchicago.com/assets/1/6/cta_Bus_Tracker_API_Developer_Guide_and_Documentation_20160929.pdf">Bus Tracker API Documentation</a></p>
<p><a href="https://www.transitchicago.com/developers/alerts/">Customer Alerts API Documentation</a></p>
<div id="apis-in-rcta" class="section level2">
<h2 class="hasAnchor">
<a href="#apis-in-rcta" class="anchor"></a>APIs in rCTA</h2>
<p>There are two API contained in this package:</p>
<ul>
<li>
<strong>Bus Tracker API:</strong> This API allows developers to request and retrieve the real-time information of buses. Data available through the API includes:
<ul>
<li>Vehicle locations</li>
<li>Route data (route lists, stop lists geo-positional route definitions, etc.)</li>
<li>Prediction Data</li>
<li>Service Bulletins</li>
</ul>
</li>
<li>
<strong>Customer Alerts API:</strong> This API allows developers to get detailed information about current alerts. Data available through the API includes:
<ul>
<li>Route status</li>
<li>Detailed alerts</li>
</ul>
</li>
</ul>
</div>
<div id="api-authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#api-authentication" class="anchor"></a>API Authentication</h2>
<p>You will need an API key to interact with <strong>Bus Tracker API</strong> on every requrest (Customer Alerts API does not need authentication). To become authorized, follow the instructions below:</p>
<p><strong>1. Get an API key</strong></p>
<ul>
<li>Sign up and activate your account at <a href="http://www.ctabustracker.com/bustime/createAccount.jsp">Bus Tracker Sign up</a>.</li>
<li>Sign into <a href="http://www.ctabustracker.com/bustime/login.jsp">Bus Tracker Sign in</a>.</li>
<li>Choose on My Account in the upper right-hand corner of the page.</li>
<li>Follow the link under “Developer API” to apply.</li>
</ul>
<p><strong>2. Store your API key</strong></p>
<p>Once you obtain an API key, we encourage you to store it in the <code>.Renviron</code> file which is loaded during R’s startup.</p>
<p>First, find your R Home directory:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Rhome">R.home</a></span>(<span class="dt">component =</span> <span class="st">"home"</span>)</code></pre></div>
<p>Then, open the the file <code>Renviron.site</code> and add the Bus Tracker API keys with the following lines:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BUS_CLIENT_KEY =<span class="st"> </span>THE_API_KEY_HERE</code></pre></div>
</div>
<div id="installation-and-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-and-setup" class="anchor"></a>Installation and Setup</h2>
<p>You can install the released version of rCTA from <strong>GitHub</strong> with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ytingc/rCTA"</span>)</code></pre></div>
<p>Then, you can load rCTA package to play with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(rCTA)</code></pre></div>
</div>
<div id="features-of-rcta-pacakge" class="section level2">
<h2 class="hasAnchor">
<a href="#features-of-rcta-pacakge" class="anchor"></a>Features of rCTA pacakge</h2>
<p><strong>Search Routes</strong></p>
<p>Get routes of bus number 5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="kw"><a href="reference/get_route.html">get_route</a></span>(<span class="dt">bus =</span> <span class="dv">5</span>)
knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(result))</code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="left">bus_number</th>
<th align="left">route_name</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">5</td>
<td align="left">South Shore Night Bus</td>
</tr></tbody>
</table>
<p><strong>Search Direction</strong></p>
<p>Get direction of bus number 126.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_direction.html">get_direction</a></span>(<span class="dt">bus =</span> <span class="dv">126</span>)
knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(result))</code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="left">dir</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Eastbound</td>
</tr>
<tr class="even">
<td align="left">Westbound</td>
</tr>
</tbody>
</table>
<p><strong>Search Stops</strong></p>
<p>Search for stop information. Useful when stop_id is unknown.It is not case sensitive. For example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw"><a href="reference/lookupstop.html">lookupstop</a></span>(<span class="dt">bus =</span> <span class="dv">1</span>, <span class="dt">stopname =</span> <span class="st">"Michigan"</span>, <span class="dt">dir =</span> <span class="st">"southbound"</span>)
knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(result, <span class="dv">10</span>))</code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="left">bus_num</th>
<th align="left">direction</th>
<th align="left">stop_id</th>
<th align="left">stop_name</th>
<th align="right">lat</th>
<th align="right">lon</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1606</td>
<td align="left">3000 S Michigan</td>
<td align="right">41.84045</td>
<td align="right">-87.62356</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1590</td>
<td align="left">Michigan &amp; 11th Street</td>
<td align="right">41.86892</td>
<td align="right">-87.62394</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1592</td>
<td align="left">Michigan &amp; 13th Street</td>
<td align="right">41.86553</td>
<td align="right">-87.62399</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1593</td>
<td align="left">Michigan &amp; 14th Street</td>
<td align="right">41.86391</td>
<td align="right">-87.62414</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1595</td>
<td align="left">Michigan &amp; 16th Street</td>
<td align="right">41.85997</td>
<td align="right">-87.62403</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1596</td>
<td align="left">Michigan &amp; 18th Street</td>
<td align="right">41.85763</td>
<td align="right">-87.62405</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1598</td>
<td align="left">Michigan &amp; 21st Street</td>
<td align="right">41.85404</td>
<td align="right">-87.62384</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">16014</td>
<td align="left">Michigan &amp; 23rd Street</td>
<td align="right">41.85130</td>
<td align="right">-87.62383</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">17243</td>
<td align="left">Michigan &amp; 24th Street</td>
<td align="right">41.84946</td>
<td align="right">-87.62383</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">Southbound</td>
<td align="left">1602</td>
<td align="left">Michigan &amp; 25th Street</td>
<td align="right">41.84723</td>
<td align="right">-87.62372</td>
</tr>
</tbody>
</table>
<p><strong>Set up favorite route</strong></p>
<p>Get real-time information of your favorite route. You can obtain estimated arrival time, waiting time, travel time, delay and alert message. It also allows users to collect and save the real-time information for a given period in a data frame through calling the function periodically. Note that it is a real-time data, it may generate error message“No service scheduled” when you request at a time out of operation. Or, it may generate error message “No arrival times” if the system has not been updated yet, since the CTA system update the data about once per minute.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw"><a href="reference/myfavrt.html">myfavrt</a></span>(<span class="dt">bus =</span> <span class="dv">126</span>, <span class="dt">start_id =</span> <span class="dv">36</span>, <span class="dt">end_id =</span> <span class="dv">60</span>, <span class="dt">interval=</span> <span class="dv">60</span>, <span class="dt">times =</span> <span class="dv">5</span>)
knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(result))</code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="right">no.</th>
<th align="left">current_time</th>
<th align="left">bus_num</th>
<th align="left">start_stop_id</th>
<th align="left">start_stop_name</th>
<th align="right">end_stop_id</th>
<th align="left">end_stop_name</th>
<th align="left">wait_time_in_min</th>
<th align="left">departurel_time</th>
<th align="left">arrival_time</th>
<th align="left">travel_time_in_min</th>
<th align="left">delay</th>
<th align="left">status</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">126</td>
<td align="left">20181217 12:22</td>
<td align="left">126</td>
<td align="left">36</td>
<td align="left">Jackson + 2609 West Alley</td>
<td align="right">60</td>
<td align="left">Jackson + Aberdeen</td>
<td align="left">5</td>
<td align="left">20181217 12:27</td>
<td align="left">20181217 12:39</td>
<td align="left">12 mins</td>
<td align="left">FALSE</td>
<td align="left">Planned Reroute</td>
</tr>
<tr class="even">
<td align="right">126</td>
<td align="left">20181217 12:23</td>
<td align="left">126</td>
<td align="left">36</td>
<td align="left">Jackson + 2609 West Alley</td>
<td align="right">60</td>
<td align="left">Jackson + Aberdeen</td>
<td align="left">4</td>
<td align="left">20181217 12:28</td>
<td align="left">20181217 12:39</td>
<td align="left">11 mins</td>
<td align="left">FALSE</td>
<td align="left">Planned Reroute</td>
</tr>
<tr class="odd">
<td align="right">126</td>
<td align="left">20181217 12:24</td>
<td align="left">126</td>
<td align="left">36</td>
<td align="left">Jackson + 2609 West Alley</td>
<td align="right">60</td>
<td align="left">Jackson + Aberdeen</td>
<td align="left">4</td>
<td align="left">20181217 12:28</td>
<td align="left">20181217 12:39</td>
<td align="left">11 mins</td>
<td align="left">FALSE</td>
<td align="left">Planned Reroute</td>
</tr>
<tr class="even">
<td align="right">126</td>
<td align="left">20181217 12:25</td>
<td align="left">126</td>
<td align="left">36</td>
<td align="left">Jackson + 2609 West Alley</td>
<td align="right">60</td>
<td align="left">Jackson + Aberdeen</td>
<td align="left">3</td>
<td align="left">20181217 12:29</td>
<td align="left">20181217 12:40</td>
<td align="left">11 mins</td>
<td align="left">FALSE</td>
<td align="left">Planned Reroute</td>
</tr>
<tr class="odd">
<td align="right">126</td>
<td align="left">20181217 12:26</td>
<td align="left">126</td>
<td align="left">36</td>
<td align="left">Jackson + 2609 West Alley</td>
<td align="right">60</td>
<td align="left">Jackson + Aberdeen</td>
<td align="left">2</td>
<td align="left">20181217 12:28</td>
<td align="left">20181217 12:39</td>
<td align="left">11 mins</td>
<td align="left">FALSE</td>
<td align="left">Planned Reroute</td>
</tr>
</tbody>
</table>
<p><strong>Get Alerts</strong></p>
<p>Get the alerts of bus number 8.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="kw"><a href="reference/get_alert.html">get_alert</a></span>(<span class="dt">bus =</span> <span class="dv">8</span>)
knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(result))</code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="left">Headline</th>
<th align="left">ShortDescription</th>
<th align="left">EventStart</th>
<th align="left">EventEnd</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">New Schedules in Effect</td>
<td align="left">Beginning Sunday, December 16, updated schedules went into effect for several bus routes.</td>
<td align="left">2018-12-16</td>
<td align="left">NA</td>
</tr></tbody>
</table>
<p><strong>Get an Overview of Current Bus Alerts</strong></p>
<p>Obtain an overview of current alerts of all CTA buses through a summary table that provide the count of each type of alerts.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw"><a href="reference/alertstat.html">alertstat</a></span>()
knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(result), <span class="dt">col.names =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Type"</span>, <span class="st">"Frequency"</span>))</code></pre></div>
<table class="table table">
<thead><tr class="header">
<th align="left">Type</th>
<th align="right">Frequency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Bus Stop Note</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Bus Stop Relocation</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Planned Reroute</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">Service Change</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Special Note</td>
<td align="right">136</td>
</tr>
</tbody>
</table>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<p>Detailed application of functions can be otained through the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># search for general information</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"lookup_info"</span>, <span class="dt">package =</span> <span class="st">"rCTA"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set up my favorite route</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"setup_myfavorite"</span>, <span class="dt">package =</span> <span class="st">"rCTA"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get information of alerts</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/vignette">vignette</a></span>(<span class="st">"Alert_info"</span>, <span class="dt">package =</span> <span class="st">"rCTA"</span>)</code></pre></div>
</div>
<div id="contact" class="section level2">
<h2 class="hasAnchor">
<a href="#contact" class="anchor"></a>Contact</h2>
<p><a href="mailto:yc3539@columbia.edu">yc3539@columbia.edu</a> or open GitHub issue.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Yu-Ting Cheng <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Yu-Ting Cheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
